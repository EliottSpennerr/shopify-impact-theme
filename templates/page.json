/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "main": {
      "type": "main-page",
      "disabled": true,
      "settings": {
        "content_width": "80ch"
      }
    },
    "custom_liquid_pwAPQB": {
      "type": "custom-liquid",
      "name": "Custom Liquid",
      "settings": {
        "full_width": true,
        "remove_vertical_spacing": false,
        "remove_horizontal_spacing": false,
        "liquid": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Butikskarta med sök</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n  <style>\n    body {\n      font-family: sans-serif;\n      margin: 0;\n      padding: 0;\n    }\n\n    h2 {\n      padding: 20px;\n      margin: 0;\n    }\n\n    #map {\n      height: 600px;\n      width: 100%;\n      position: relative;\n      z-index: 0;\n    }\n\n    .leaflet-top.leaflet-left {\n      top: 80px !important; /* flytta ner leaflet-kontroller om du har en fast header */\n    }\n\n    .search-box {\n      position: absolute;\n      top: 10px;\n      left: 10px;\n      z-index: 1000;\n      background: white;\n      padding: 8px 12px;\n      border-radius: 8px;\n      box-shadow: 0 2px 6px rgba(0,0,0,0.2);\n    }\n\n    .search-box input {\n      width: 250px;\n      padding: 6px 10px;\n      border: 1px solid #ccc;\n      border-radius: 4px;\n      font-size: 14px;\n    }\n\n    .custom-marker {\n      width: 12px;\n      height: 12px;\n      background-color: #0B61FA;\n      border-radius: 50%;\n      border: 2px solid white;\n      box-shadow: 0 0 4px rgba(0,0,0,0.2);\n    }\n  </style>\n</head>\n<body>\n\n  <h2>Hitta din butik</h2>\n  <div id=\"map\">\n    <div class=\"search-box\">\n      <input type=\"text\" id=\"search\" placeholder=\"Sök butik eller ort...\" />\n    </div>\n  </div>\n\n  <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n  <script>\n    const map = L.map('map').setView([59.3293, 18.0686], 5);\n\n    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n      attribution: '&copy; OpenStreetMap contributors &copy; CARTO',\n      subdomains: 'abcd',\n      maxZoom: 19\n    }).addTo(map);\n\n    const stores = [\n      { name: \"Butik Stockholm\", city: \"Stockholm\", lat: 59.3293, lng: 18.0686 },\n      { name: \"Butik Göteborg\", city: \"Göteborg\", lat: 57.7089, lng: 11.9746 },\n      { name: \"Butik Malmö\", city: \"Malmö\", lat: 55.6050, lng: 13.0038 },\n      { name: \"Butik Umeå\", city: \"Umeå\", lat: 63.8258, lng: 20.2630 }\n    ];\n\n    let allMarkers = [];\n\n    function renderMarkers(filteredStores) {\n      allMarkers.forEach(marker => map.removeLayer(marker));\n      allMarkers = [];\n\n      filteredStores.forEach(store => {\n        const marker = L.divIcon({ className: 'custom-marker' });\n        const gmapsUrl = `https://www.google.com/maps/search/?api=1&query=${store.lat},${store.lng}`;\n\n        const m = L.marker([store.lat, store.lng], { icon: marker })\n          .addTo(map)\n          .bindPopup(`<b>${store.name}</b><br><a href=\"${gmapsUrl}\" target=\"_blank\">Hitta hit →</a>`);\n\n        allMarkers.push(m);\n      });\n    }\n\n    // Init\n    renderMarkers(stores);\n\n    // Sök\n    document.getElementById('search').addEventListener('input', function (e) {\n      const query = e.target.value.toLowerCase();\n      const filtered = stores.filter(store =>\n        store.name.toLowerCase().includes(query) || store.city.toLowerCase().includes(query)\n      );\n      renderMarkers(filtered);\n    });\n  </script>\n</body>\n</html>",
        "background": "",
        "background_gradient": "",
        "text_color": ""
      }
    }
  },
  "order": [
    "main",
    "custom_liquid_pwAPQB"
  ]
}
